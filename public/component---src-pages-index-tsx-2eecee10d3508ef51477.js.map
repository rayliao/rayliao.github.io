{"version":3,"sources":["webpack:///./src/components/GUIView/index.ts","webpack:///./src/utils/event.ts","webpack:///./src/components/WebGLView/InteractiveControls.ts","webpack:///./src/utils/easing.ts","webpack:///./src/components/WebGLView/TouchTexture.ts","webpack:///./src/components/WebGLView/Particles.ts","webpack:///./src/components/WebGLView/index.tsx","webpack:///./src/components/InteractivePaticles/index.tsx","webpack:///./src/components/OldHome/Layout/index.tsx","webpack:///./src/components/OldHome/index.tsx","webpack:///./src/pages/index.tsx","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/WebGLView/shaders/particle.vert","webpack:///./src/components/WebGLView/shaders/particle.frag"],"names":["GUIView","webgl","this","particlesHitArea","particlesRandom","particlesDepth","particlesSize","touchRadius","range","rangeRandom","rangeSize","rangeDepth","rangeRadius","initControlKit","controlKit","ControlKit","addPanel","width","enable","addGroup","label","addCanvas","height","addSlider","onChange","onTouchChange","bind","onParticlesChange","component","getComponentBy","touchCanvas","_canvas","touchCtx","getContext","initStats","stats","Stats","document","body","appendChild","dom","update","particles","touch","source","canvas","x","Math","floor","fillRect","drawImage","style","display","disable","toggle","_enabled","radius","object3D","material","uniforms","uRandom","value","uDepth","uSize","hitArea","visible","alreadyTested","passiveSupported","passiveEvent","opts","Object","defineProperty","get","window","addEventListener","e","removeEventListener","isSupported","passive","InteractiveControls","camera","el","_this","_EventEmitter","call","objects","hovered","selected","isDown","plane","THREE","raycaster","mouse","offset","intersection","browser","enabled","addListeners","removeListeners","handlerDown","onDown","handlerMove","onMove","handlerUp","onUp","handlerLeave","onLeave","mobile","resize","y","rect","innerWidth","innerHeight","getBoundingClientRect","t","touches","clientX","clientY","setFromCamera","intersects","intersectObjects","length","object","intersectionData","setFromNormalAndCoplanarPoint","getWorldDirection","normal","position","emit","previous","ray","intersectPlane","copy","sub","EventEmitter","easeInOutQuad","b","c","d","easeOutSine","sin","PI","TouchTexture","parent","size","maxAge","trail","initTexture","createElement","ctx","fillStyle","texture","id","delta","clear","forEach","point","i","age","splice","drawTouch","needsUpdate","addTouch","force","last","dx","dy","dd","min","push","pos","intensity","grd","createRadialGradient","addColorStop","beginPath","arc","fill","glslify","require","Particles","container","init","src","load","minFilter","magFilter","format","image","initPoints","initHitArea","initTouch","show","discard","numPoints","originalColors","numVisible","threshold","img","scale","imgData","getImageData","Float32Array","from","data","uTime","uTextureSize","uTexture","uTouch","vertexShader","fragmentShader","depthTest","transparent","geometry","positions","setXYZ","addAttribute","uvs","setIndex","Uint16Array","indices","offsets","angles","j","random","add","color","wireframe","handlerInteractiveMove","onInteractiveMove","interactive","addListener","_this2","removeListener","index","findIndex","obj","time","TweenLite","fromTo","to","hide","clean","_this3","Promise","resolve","reject","onComplete","destroy","ease","remove","dispose","fovHeight","set","uv","WebGLView","currSample","samples","initThree","initParticles","initControls","rnd","goto","witdh","scene","z","renderer","antialias","alpha","clock","domElement","getDelta","draw","render","then","next","aspect","updateProjectionMatrix","tan","fov","setSize","InteractivePaticles","componentDidMount","initWebGL","initGUI","animate","WelGLView","mount","gui","handlerAnimate","keyup","click","raf","requestAnimationFrame","begin","end","keyCode","react","ref","React","OldHome_Layout","_ref","children","_3935970742","Helmet_default","a","defaultTitle","site","siteMetadata","title","content","description","name","rel","href","OldHome","className","styles","InteractivePaticles_InteractivePaticles","gatsby_browser_entry","target","Index","OldHome_OldHome","m","module","exports","default","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","gatsby_link__WEBPACK_IMPORTED_MODULE_1__","gatsby_link__WEBPACK_IMPORTED_MODULE_1___default","__webpack_exports__","loader","enqueue","createContext","ProdPageRenderer","location","pageResources","InternalPageRenderer","assign","json"],"mappings":"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","file":"component---src-pages-index-tsx-2eecee10d3508ef51477.js","sourcesContent":["import ControlKit from '@brunoimbrizi/controlkit'\nimport Stats from 'stats.js'\nimport WebGLView from '../WebGLView'\n\nexport default class GUIView {\n  webgl: WebGLView\n  particlesHitArea = false\n  particlesRandom = 2\n  particlesDepth = 4\n  particlesSize = 1.5\n  touchRadius = 0.15\n  range = [0, 1]\n  rangeRandom = [1, 10]\n  rangeSize = [0, 3]\n  rangeDepth = [1, 10]\n  rangeRadius = [0, 0.5]\n  controlKit: ControlKit\n  touchCanvas: any\n  touchCtx: any\n  stats: Stats\n\n  constructor(webgl) {\n    this.webgl = webgl\n    // this.initControlKit()\n    // this.initStats();\n\n    // this.disable()\n  }\n\n  initControlKit() {\n    this.controlKit = new ControlKit()\n    this.controlKit.addPanel({ width: 300, enable: false })\n\n      .addGroup({ label: 'Touch', enable: true })\n      .addCanvas({ label: 'trail', height: 64 })\n      .addSlider(this, 'touchRadius', 'rangeRadius', { label: 'radius', onChange: this.onTouchChange.bind(this) })\n\n      .addGroup({ label: 'Particles', enable: true })\n      // .addCheckbox(this, 'particlesHitArea', { label: 'hit area', onChange: this.onParticlesChange.bind(this) })\n      .addSlider(this, 'particlesRandom', 'rangeRandom', { label: 'random', onChange: this.onParticlesChange.bind(this) })\n      .addSlider(this, 'particlesDepth', 'rangeDepth', { label: 'depth', onChange: this.onParticlesChange.bind(this) })\n      .addSlider(this, 'particlesSize', 'rangeSize', { label: 'size', onChange: this.onParticlesChange.bind(this) })\n\n    // store reference to canvas\n    const component = this.controlKit.getComponentBy({ label: 'trail' })\n    if (!component) { return }\n\n    this.touchCanvas = component._canvas\n    this.touchCtx = this.touchCanvas.getContext('2d')\n  }\n\n  initStats() {\n    this.stats = new Stats()\n\n    document.body.appendChild(this.stats.dom)\n  }\n\n  // ---------------------------------------------------------------------------------------------\n  // PUBLIC\n  // ---------------------------------------------------------------------------------------------\n\n  update() {\n    // draw touch texture\n    if (this.touchCanvas) {\n      if (!this.webgl) { return }\n      if (!this.webgl.particles) { return }\n      if (!this.webgl.particles.touch) { return }\n      const source = this.webgl.particles.touch.canvas\n      const x = Math.floor((this.touchCanvas.width - source.width) * 0.5)\n      this.touchCtx.fillRect(0, 0, this.touchCanvas.width, this.touchCanvas.height)\n      this.touchCtx.drawImage(source, x, 0)\n    }\n  }\n\n  enable() {\n    this.controlKit.enable()\n    if (this.stats) { this.stats.dom.style.display = '' }\n  }\n\n  disable() {\n    this.controlKit.disable()\n    if (this.stats) { this.stats.dom.style.display = 'none' }\n  }\n\n  toggle() {\n    if (this.controlKit._enabled) { this.disable() }\n    else { this.enable() }\n  }\n\n  onTouchChange() {\n    if (!this.webgl) { return }\n    if (!this.webgl.particles) { return }\n\n    this.webgl.particles.touch.radius = this.touchRadius\n  }\n\n  onParticlesChange() {\n    if (!this.webgl) { return }\n    if (!this.webgl.particles) { return }\n\n    this.webgl.particles.object3D.material.uniforms.uRandom.value = this.particlesRandom\n    this.webgl.particles.object3D.material.uniforms.uDepth.value = this.particlesDepth\n    this.webgl.particles.object3D.material.uniforms.uSize.value = this.particlesSize\n\n    this.webgl.particles.hitArea.material.visible = this.particlesHitArea\n  }\n}\n","let alreadyTested = false\nlet passiveSupported = false\n\nconst isSupported = () => {\n    if (alreadyTested) {\n        return passiveSupported\n    }\n    alreadyTested = true\n    let opts\n    // Test via a getter in the options object to see if the passive property is accessed\n    try {\n        opts = Object.defineProperty({}, 'passive', {\n            get: () => {\n                passiveSupported = true\n            }\n        })\n        window.addEventListener('test', null, opts)\n    } catch (e) {\n        return passiveSupported\n    }\n    window.removeEventListener('test', null, opts)\n    return passiveSupported\n}\n\nconst passiveEvent = () => {\n    return isSupported() ? { passive: true } : false\n}\n\nexport { passiveEvent }","import browser from 'browser-detect'\nimport * as EventEmitter from 'events'\nimport * as THREE from 'three'\n\nimport { BrowserDetectInfo } from 'browser-detect/dist/types/browser-detect.interface'\nimport { passiveEvent } from '../../utils/event'\n\nexport default class InteractiveControls extends EventEmitter {\n    _enabled: boolean\n    camera: THREE.PerspectiveCamera\n    el: any\n    plane: THREE.Plane\n    raycaster: THREE.Raycaster\n    mouse: THREE.Vector2\n    offset: THREE.Vector3\n    intersection: THREE.Vector3\n    objects: any = []\n    hovered: any = null\n    selected: any = null\n    isDown: boolean = false\n    browser: BrowserDetectInfo\n    handlerDown: any\n    handlerMove: any\n    handlerUp: any\n    handlerLeave: any\n    rect: any\n    intersectionData: any\n    get enabled() {\n        return this._enabled\n    }\n    constructor(camera: THREE.PerspectiveCamera, el: any) {\n        super()\n\n        this.camera = camera\n        this.el = el || window\n\n        this.plane = new THREE.Plane()\n        this.raycaster = new THREE.Raycaster()\n\n        this.mouse = new THREE.Vector2()\n        this.offset = new THREE.Vector3()\n        this.intersection = new THREE.Vector3()\n\n        this.browser = browser()\n\n        this.enable()\n    }\n\n    enable() {\n        if (this.enabled) {\n            return\n        }\n        this.addListeners()\n        this._enabled = true\n    }\n\n    disable() {\n        if (!this.enabled) {\n            return\n        }\n        this.removeListeners()\n        this._enabled = false\n    }\n\n    addListeners() {\n        this.handlerDown = this.onDown.bind(this)\n        this.handlerMove = this.onMove.bind(this)\n        this.handlerUp = this.onUp.bind(this)\n        this.handlerLeave = this.onLeave.bind(this)\n\n        if (this.browser.mobile) {\n            this.el.addEventListener('touchstart', this.handlerDown, passiveEvent)\n            this.el.addEventListener('touchmove', this.handlerMove, passiveEvent)\n            this.el.addEventListener('touchend', this.handlerUp, passiveEvent)\n        }\n        else {\n            this.el.addEventListener('mousedown', this.handlerDown)\n            this.el.addEventListener('mousemove', this.handlerMove)\n            this.el.addEventListener('mouseup', this.handlerUp)\n            this.el.addEventListener('mouseleave', this.handlerLeave)\n        }\n    }\n\n    removeListeners() {\n        if (this.browser.mobile) {\n            this.el.removeEventListener('touchstart', this.handlerDown)\n            this.el.removeEventListener('touchmove', this.handlerMove)\n            this.el.removeEventListener('touchend', this.handlerUp)\n        }\n        else {\n            this.el.removeEventListener('mousedown', this.handlerDown)\n            this.el.removeEventListener('mousemove', this.handlerMove)\n            this.el.removeEventListener('mouseup', this.handlerUp)\n            this.el.removeEventListener('mouseleave', this.handlerLeave)\n        }\n    }\n\n    resize(x?: any, y?: any, width?: any, height?: any) {\n        if (x || y || width || height) {\n            this.rect = { x, y, width, height }\n        }\n        else if (this.el === window) {\n            this.rect = { x: 0, y: 0, width: window.innerWidth, height: window.innerHeight }\n        }\n        else {\n            this.rect = this.el.getBoundingClientRect()\n        }\n    }\n\n    onMove(e: any) {\n        if (!this.rect) {\n            return\n        }\n        const t = (e.touches) ? e.touches[0] : e\n        const touch = { x: t.clientX, y: t.clientY }\n\n        this.mouse.x = ((touch.x + this.rect.x) / this.rect.width) * 2 - 1\n        this.mouse.y = -((touch.y + this.rect.y) / this.rect.height) * 2 + 1\n\n        this.raycaster.setFromCamera(this.mouse, this.camera)\n\n\t\t/*\n\t\t// is dragging\n\t\tif (this.selected && this.isDown) {\n\t\t\tif (this.raycaster.ray.intersectPlane(this.plane, this.intersection)) {\n\t\t\t\tthis.emit('interactive-drag', { object: this.selected, position: this.intersection.sub(this.offset) });\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t*/\n\n        const intersects = this.raycaster.intersectObjects(this.objects)\n\n        if (intersects.length > 0) {\n            const object = intersects[0].object\n            this.intersectionData = intersects[0]\n\n            this.plane.setFromNormalAndCoplanarPoint(this.camera.getWorldDirection(this.plane.normal), object.position)\n\n            if (this.hovered !== object) {\n                this.emit('interactive-out', { object: this.hovered })\n                this.emit('interactive-over', { object })\n                this.hovered = object\n            }\n            else {\n                this.emit('interactive-move', { object, intersectionData: this.intersectionData })\n            }\n        }\n        else {\n            this.intersectionData = null\n\n            if (this.hovered !== null) {\n                this.emit('interactive-out', { object: this.hovered })\n                this.hovered = null\n            }\n        }\n    }\n\n    onDown(e: any) {\n        this.isDown = true\n        this.onMove(e)\n\n        this.emit('interactive-down', {\n            object: this.hovered,\n            previous: this.selected,\n            intersectionData: this.intersectionData\n        })\n        this.selected = this.hovered\n\n        if (this.selected) {\n            if (this.raycaster.ray.intersectPlane(this.plane, this.intersection)) {\n                this.offset.copy(this.intersection).sub(this.selected.position)\n            }\n        }\n    }\n\n    onUp(e: any) {\n        this.isDown = false\n        this.emit('interactive-up', { object: this.hovered })\n    }\n\n    onLeave(e: any) {\n        this.onUp(e)\n        this.emit('interactive-out', { object: this.hovered })\n        this.hovered = null\n    }\n}\n","const easeInQuad = (t: any, b: any, c: any, d: any) => {\n  t /= d\n  return c * t * t + b\n}\n\nconst easeOutQuad = (t, b, c, d) => {\n  t /= d\n  return -c * t * (t - 2) + b\n}\n\nconst easeInOutQuad = (t, b, c, d) => {\n  t /= d / 2\n  if (t < 1) { return c / 2 * t * t + b }\n  t--\n  return -c / 2 * (t * (t - 2) - 1) + b\n}\n\nconst easeInOutQuart = (t, b, c, d) => {\n  const val = t /= d / 2\n  if (val < 1) {\n    return c / 2 * t * t * t * t + b\n  } else {\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b\n  }\n}\n\nconst easeInSine = (t, b, c, d) => {\n  return -c * Math.cos(t / d * (Math.PI / 2)) + c + b\n}\n\nconst easeOutSine = (t, b, c, d) => {\n  return c * Math.sin(t / d * (Math.PI / 2)) + b\n}\n\nconst easeInOutSine = (t, b, c, d) => {\n  return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b\n}\n\nexport { easeInQuad, easeOutQuad, easeInOutQuad, easeInOutQuart, easeInSine, easeOutSine, easeInOutSine }\n\n","import * as THREE from 'three'\nimport { easeOutSine } from '../../utils/easing'\n\nexport default class TouchTexture {\n  parent: any\n  size: any = 64\n  maxAge: any = 120\n  radius: any = 0.15\n  trail: any = []\n  canvas: any\n  ctx: any\n  texture: any\n  constructor(parent) {\n    this.parent = parent\n\n    this.initTexture()\n  }\n\n  initTexture() {\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = this.canvas.height = this.size\n    this.ctx = this.canvas.getContext('2d')\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n\n    this.texture = new THREE.Texture(this.canvas)\n\n    this.canvas.id = 'touchTexture'\n    this.canvas.style.width = this.canvas.style.height = `${this.canvas.width}px`\n  }\n\n  update(delta) {\n    this.clear()\n\n    // age points\n    this.trail.forEach((point, i) => {\n      point.age++\n      // remove old\n      if (point.age > this.maxAge) {\n        this.trail.splice(i, 1)\n      }\n    })\n\n    this.trail.forEach((point, i) => {\n      this.drawTouch(point)\n    })\n\n    this.texture.needsUpdate = true\n  }\n\n  clear() {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n  }\n\n  addTouch(point) {\n    let force = 0\n    const last = this.trail[this.trail.length - 1]\n    if (last) {\n      const dx = last.x - point.x\n      const dy = last.y - point.y\n      const dd = dx * dx + dy * dy\n      force = Math.min(dd * 10000, 1)\n    }\n    this.trail.push({ x: point.x, y: point.y, age: 0, force })\n  }\n\n  drawTouch(point) {\n    const pos = {\n      x: point.x * this.size,\n      y: (1 - point.y) * this.size\n    }\n\n    let intensity = easeOutSine(1 - (point.age - this.maxAge * 0.3) / (this.maxAge * 0.7), 0, 1, 1)\n    if (point.age < this.maxAge * 0.3) {\n      intensity = easeOutSine(point.age / (this.maxAge * 0.3), 0, 1, 1)\n    }\n\n    intensity *= point.force\n\n    const radius = this.size * this.radius * intensity\n    const grd = this.ctx.createRadialGradient(pos.x, pos.y, radius * 0.25, pos.x, pos.y, radius)\n    grd.addColorStop(0, `rgba(255, 255, 255, 0.2)`)\n    grd.addColorStop(1, 'rgba(0, 0, 0, 0.0)')\n\n    this.ctx.beginPath()\n    this.ctx.fillStyle = grd\n    this.ctx.arc(pos.x, pos.y, radius, 0, Math.PI * 2)\n    this.ctx.fill()\n  }\n}\n","import { TweenLite } from 'gsap/TweenMax'\nimport * as THREE from 'three'\nimport { easeInOutQuad } from '../../utils/easing'\nimport TouchTexture from './TouchTexture'\n\nconst glslify = require('glslify')\n\nexport default class Particles {\n  webgl: any\n  container: any\n  texture: any\n  width: any\n  height: any\n  numPoints: any\n  object3D: any\n  touch: any\n  hitArea: any\n  handlerInteractiveMove: any\n  constructor(webgl) {\n    this.webgl = webgl\n    this.container = new THREE.Object3D()\n  }\n\n  init(src) {\n    const loader = new THREE.TextureLoader()\n    loader.load(src, (texture) => {\n      this.texture = texture\n      this.texture.minFilter = THREE.LinearFilter\n      this.texture.magFilter = THREE.LinearFilter\n      this.texture.format = THREE.RGBFormat\n\n      this.width = texture.image.width\n      this.height = texture.image.height\n\n      this.initPoints(true)\n      this.initHitArea()\n      this.initTouch()\n      this.resize()\n      this.show()\n    })\n  }\n\n  initPoints(discard) {\n    this.numPoints = this.width * this.height\n\n    let numVisible = this.numPoints\n    let threshold = 0\n    let originalColors\n\n    if (discard) {\n      // discard pixels darker than threshold #22\n      numVisible = 0\n      threshold = 34\n\n      const img = this.texture.image\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n\n      canvas.width = this.width\n      canvas.height = this.height\n      ctx.scale(1, -1)\n      ctx.drawImage(img, 0, 0, this.width, this.height * -1)\n\n      const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n      originalColors = Float32Array.from(imgData.data)\n\n      for (let i = 0; i < this.numPoints; i++) {\n        if (originalColors[i * 4 + 0] > threshold) { numVisible++ }\n      }\n\n      // console.log('numVisible', numVisible, this.numPoints);\n    }\n\n    const uniforms = {\n      uTime: { value: 0 },\n      uRandom: { value: 1.0 },\n      uDepth: { value: 2.0 },\n      uSize: { value: 0.0 },\n      uTextureSize: { value: new THREE.Vector2(this.width, this.height) },\n      uTexture: { value: this.texture },\n      uTouch: { value: null },\n    }\n\n    const material = new THREE.RawShaderMaterial({\n      uniforms,\n      vertexShader: glslify(require('./shaders/particle.vert')),\n      fragmentShader: glslify(require('./shaders/particle.frag')),\n      depthTest: false,\n      transparent: true,\n      // blending: THREE.AdditiveBlending\n    })\n\n    const geometry = new THREE.InstancedBufferGeometry()\n\n    // positions\n    const positions = new THREE.BufferAttribute(new Float32Array(4 * 3), 3)\n    positions.setXYZ(0, -0.5, 0.5, 0.0)\n    positions.setXYZ(1, 0.5, 0.5, 0.0)\n    positions.setXYZ(2, -0.5, -0.5, 0.0)\n    positions.setXYZ(3, 0.5, -0.5, 0.0)\n    geometry.addAttribute('position', positions)\n\n    // uvs\n    const uvs = new THREE.BufferAttribute(new Float32Array(4 * 2), 2)\n    uvs.setXYZ(0, 0.0, 0.0, 0.0)\n    uvs.setXYZ(1, 1.0, 0.0, 0.0)\n    uvs.setXYZ(2, 0.0, 1.0, 0.0)\n    uvs.setXYZ(3, 1.0, 1.0, 0.0)\n    geometry.addAttribute('uv', uvs)\n\n    // index\n    geometry.setIndex(new THREE.BufferAttribute(new Uint16Array([0, 2, 1, 2, 3, 1]), 1))\n\n    const indices = new Uint16Array(numVisible)\n    const offsets = new Float32Array(numVisible * 3)\n    const angles = new Float32Array(numVisible)\n\n    for (let i = 0, j = 0; i < this.numPoints; i++) {\n      if (discard && originalColors[i * 4 + 0] <= threshold) { continue }\n\n      offsets[j * 3 + 0] = i % this.width\n      offsets[j * 3 + 1] = Math.floor(i / this.width)\n\n      indices[j] = i\n\n      angles[j] = Math.random() * Math.PI\n\n      j++\n    }\n\n    geometry.addAttribute('pindex', new THREE.InstancedBufferAttribute(indices, 1, false))\n    geometry.addAttribute('offset', new THREE.InstancedBufferAttribute(offsets, 3, false))\n    geometry.addAttribute('angle', new THREE.InstancedBufferAttribute(angles, 1, false))\n\n    this.object3D = new THREE.Mesh(geometry, material)\n    this.container.add(this.object3D)\n  }\n\n  initTouch() {\n    // create only once\n    if (!this.touch) { this.touch = new TouchTexture(this) }\n    this.object3D.material.uniforms.uTouch.value = this.touch.texture\n  }\n\n  initHitArea() {\n    const geometry = new THREE.PlaneGeometry(this.width, this.height, 1, 1)\n    const material = new THREE.MeshBasicMaterial({ color: 0xFFFFFF, wireframe: true, depthTest: false })\n    material.visible = false\n    this.hitArea = new THREE.Mesh(geometry, material)\n    this.container.add(this.hitArea)\n  }\n\n  addListeners() {\n    this.handlerInteractiveMove = this.onInteractiveMove.bind(this)\n\n    this.webgl.interactive.addListener('interactive-move', this.handlerInteractiveMove)\n    this.webgl.interactive.objects.push(this.hitArea)\n    this.webgl.interactive.enable()\n  }\n\n  removeListeners() {\n    this.webgl.interactive.removeListener('interactive-move', this.handlerInteractiveMove)\n\n    const index = this.webgl.interactive.objects.findIndex(obj => obj === this.hitArea)\n    this.webgl.interactive.objects.splice(index, 1)\n    this.webgl.interactive.disable()\n  }\n\n  // ---------------------------------------------------------------------------------------------\n  // PUBLIC\n  // ---------------------------------------------------------------------------------------------\n\n  update(delta) {\n    if (!this.object3D) { return }\n    if (this.touch) { this.touch.update() }\n\n    this.object3D.material.uniforms.uTime.value += delta\n  }\n\n  show(time = 1.0) {\n    // reset\n    TweenLite.fromTo(this.object3D.material.uniforms.uSize, time, { value: 0.5 }, { value: 1.5 })\n    TweenLite.to(this.object3D.material.uniforms.uRandom, time, { value: 2.0 })\n    TweenLite.fromTo(this.object3D.material.uniforms.uDepth, time * 1.5, { value: 40.0 }, { value: 4.0 })\n\n    this.addListeners()\n  }\n\n  hide(clean, time = 0.8) {\n    return new Promise((resolve, reject) => {\n      TweenLite.to(this.object3D.material.uniforms.uRandom, time, {\n        value: 5.0, onComplete: () => {\n          if (clean) { this.destroy() }\n          resolve()\n        }\n      })\n      TweenLite.to(this.object3D.material.uniforms.uDepth, time, { value: -20.0, ease: easeInOutQuad })\n      TweenLite.to(this.object3D.material.uniforms.uSize, time * 0.8, { value: 0.0 })\n\n      this.removeListeners()\n    })\n  }\n\n  destroy() {\n    if (!this.object3D) { return }\n\n    this.object3D.parent.remove(this.object3D)\n    this.object3D.geometry.dispose()\n    this.object3D.material.dispose()\n    this.object3D = null\n\n    if (!this.hitArea) { return }\n\n    this.hitArea.parent.remove(this.hitArea)\n    this.hitArea.geometry.dispose()\n    this.hitArea.material.dispose()\n    this.hitArea = null\n  }\n\n  // ---------------------------------------------------------------------------------------------\n  // EVENT HANDLERS\n  // ---------------------------------------------------------------------------------------------\n\n  resize() {\n    if (!this.object3D) { return }\n\n    const scale = this.webgl.fovHeight / this.height\n    this.object3D.scale.set(scale, scale, 1)\n    this.hitArea.scale.set(scale, scale, 1)\n  }\n\n  onInteractiveMove(e) {\n    const uv = e.intersectionData.uv\n    if (this.touch) { this.touch.addTouch(uv) }\n  }\n}\n","import * as THREE from 'three'\nimport InteractiveControls from './InteractiveControls'\nimport Particles from './Particles'\n\nexport default class WebGLView {\n  mount: any\n  scene: THREE.Scene\n  camera: THREE.PerspectiveCamera\n  renderer: THREE.WebGLRenderer\n  clock: THREE.Clock\n  interactive: InteractiveControls\n  particles: Particles\n  currSample: any = null\n  fovHeight: any\n  samples = [\n    'images/sample-01.png',\n    'images/sample-02.png',\n    'images/sample-03.png',\n    'images/sample-04.png',\n    'images/sample-05.png',\n  ]\n  constructor() {\n    this.initThree()\n    this.initParticles()\n    this.initControls()\n\n    const rnd = ~~(Math.random() * this.samples.length)\n    this.goto(rnd)\n  }\n\n  initThree() {\n    const witdh = window.innerWidth\n    const height = window.innerHeight\n\n    // scene\n    this.scene = new THREE.Scene()\n\n    // camera\n    this.camera = new THREE.PerspectiveCamera(50, witdh / height, 1, 10000)\n    this.camera.position.z = 300\n\n    // renderer\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })\n\n    // clock\n    this.clock = new THREE.Clock(true)\n  }\n\n  initControls() {\n    this.interactive = new InteractiveControls(this.camera, this.renderer.domElement)\n  }\n\n  initParticles() {\n    this.particles = new Particles(this)\n    this.scene.add(this.particles.container)\n  }\n\n  update() {\n    const delta = this.clock.getDelta()\n\n    if (this.particles) { this.particles.update(delta) }\n  }\n\n  draw() {\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  goto(index) {\n    // init next\n    if (this.currSample == null) {\n      this.particles.init(this.samples[index])\n    }\n    // hide curr then init next\n    else {\n      this.particles.hide(true).then(() => {\n        this.particles.init(this.samples[index])\n      })\n    }\n\n    this.currSample = index\n  }\n\n  next() {\n    if (this.currSample < this.samples.length - 1) { this.goto(this.currSample + 1) }\n    else { this.goto(0) }\n  }\n\n  resize() {\n    if (!this.renderer) { return }\n    this.camera.aspect = window.innerWidth / window.innerHeight\n    this.camera.updateProjectionMatrix()\n\n    this.fovHeight = 2 * Math.tan((this.camera.fov * Math.PI) / 180 / 2) * this.camera.position.z\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n\n    if (this.interactive) { this.interactive.resize() }\n    if (this.particles) { this.particles.resize() }\n  }\n}","import * as React from 'react'\nimport GUIView from '../GUIView'\nimport WelGLView from '../WebGLView'\n\nexport default class InteractivePaticles extends React.Component {\n  mount: any\n  webgl: WelGLView\n  gui: GUIView\n  handlerAnimate: any\n  raf: any\n  componentDidMount() {\n    this.initWebGL()\n    this.initGUI()\n    this.addListeners()\n    this.animate()\n    this.resize()\n  }\n  initWebGL() {\n    this.webgl = new WelGLView()\n    this.mount.appendChild(this.webgl.renderer.domElement)\n  }\n\n  initGUI() {\n    this.gui = new GUIView(this)\n  }\n\n  addListeners() {\n    this.handlerAnimate = this.animate.bind(this)\n\n    window.addEventListener('resize', this.resize.bind(this))\n    window.addEventListener('keyup', this.keyup.bind(this))\n\n    const el = this.webgl.renderer.domElement\n    el.addEventListener('click', this.click.bind(this))\n  }\n  animate() {\n    this.update()\n    this.draw()\n\n    this.raf = requestAnimationFrame(this.handlerAnimate)\n  }\n\n  update() {\n    if (this.gui.stats) { this.gui.stats.begin() }\n    if (this.webgl) { this.webgl.update() }\n    if (this.gui) { this.gui.update() }\n  }\n\n  draw() {\n    if (this.webgl) { this.webgl.draw() }\n    if (this.gui.stats) { this.gui.stats.end() }\n  }\n\n  resize() {\n    if (this.webgl) { this.webgl.resize() }\n  }\n\n  keyup(e) {\n    if (e.keyCode === 71) { if (this.gui) { this.gui.toggle() } }\n  }\n\n  click(e) {\n    this.webgl.next()\n  }\n  render() {\n    return <div\n      style={{\n        position: 'absolute',\n      }}\n      ref={mount => this.mount = mount}\n    />\n  }\n}","import * as React from 'react'\nimport Helmet from 'react-helmet'\n\nimport { graphql, useStaticQuery } from 'gatsby'\nimport './index.css'\n\nexport default ({ children }) => {\n  const data = useStaticQuery(graphql`\n      query LayoutQuery {\n        site {\n          siteMetadata {\n            title\n            description\n          }\n        }\n      }\n    `)\n  return <>\n    <Helmet defaultTitle={data.site.siteMetadata.title}>\n      <meta content={data.site.siteMetadata.description} name='description' />\n      <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css' />\n    </Helmet>\n    {children}\n  </>\n}","import { Link } from 'gatsby'\nimport * as React from 'react'\nimport '../../styles/normalize.css'\nimport InteractivePaticles from '../InteractivePaticles'\nimport * as styles from './index.module.css'\nimport Layout from './Layout'\n\nexport default class OldHome extends React.Component {\n  render() {\n    return <Layout>\n      <div className={styles.container}>\n        <InteractivePaticles />\n        <nav className={styles.nav}>\n          <Link to='/'>HOME</Link>\n          <Link to='/blog'>BLOG</Link>\n          <Link to='/shoot/2018'>PHOTOGRAPHY</Link>\n          <Link to='/about'>PHOTOGRAPHY</Link>\n        </nav>\n        <div className={styles.main}>\n          <h1>WingRay Liao</h1>\n          <p>Front-end developer, photography enthusiasts</p>\n        </div>\n        <div className={styles.sns}>\n          <a href='https://github.com/rayliao' target='_blank' title='github'><i className='fa fa-github' /></a>\n          <a href='https://instagram.com/wingrayliao/' target='_blank' title='instagram'><i className='fa fa-instagram' /></a>\n          <a href='https://www.facebook.com/wingrayliao' target='_blank' title='facebook'><i className='fa fa-facebook-square' /></a>\n          <a href='https://www.linkedin.com/in/wingrayliao' target='_blank' title='linkedin'><i className='fa fa-linkedin' /></a>\n          <a href='http://weibo.com/574954033' target='_blank' title='weibo'><i className='fa fa-weibo' /></a>\n          <a href='https://500px.com/wingrayliao' target='_blank' title='500px'><i className='fa fa-500px' /></a>\n          <a href='https://www.flickr.com/photos/ray1989/' target='_blank' title='flickr'><i className='fa fa-flickr' /></a>\n          <a href='http://rayliao.lofter.com/' target='_blank' title='lofter'>lofter</a>\n          <a href='http://blog.segmentfault.com/rayliao' target='_blank' className='segmentfault'>sf</a>\n          <a href='http://www.douban.com/people/lensliao/' target='_blank' title='douban'>è±†</a>\n          <a href='javascript:;' title='QQ: 574954033'><i className='fa fa-qq' /></a>\n          <a href='javascript:;' title='rayliao1989@gmail.com'><i className='fa fa-envelope' /></a>\n        </div>\n      </div>\n    </Layout>\n  }\n}","import * as React from 'react'\nimport OldHome from '../components/OldHome'\n\nexport default class Index extends React.Component {\n  render() {\n    return <OldHome/>\n  }\n}","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport loader from \"./loader\"\n\nconst prefetchPathname = loader.enqueue\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n  prefetchPathname,\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","module.exports = \"// @author brunoimbrizi / http://brunoimbrizi.com\\n\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nattribute float pindex;\\nattribute vec3 position;\\nattribute vec3 offset;\\nattribute vec2 uv;\\nattribute float angle;\\n\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nuniform float uTime;\\nuniform float uRandom;\\nuniform float uDepth;\\nuniform float uSize;\\nuniform vec2 uTextureSize;\\nuniform sampler2D uTexture;\\nuniform sampler2D uTouch;\\n\\nvarying vec2 vPUv;\\nvarying vec2 vUv;\\n\\n// #pragma glslify: snoise2 = require(glsl-noise/simplex/2d)\\n\\nfloat random(float n) {\\n\\treturn fract(sin(n) * 43758.5453123);\\n}\\n\\nvec3 mod289_1_0(vec3 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec2 mod289_1_0(vec2 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec3 permute_1_1(vec3 x) {\\n  return mod289_1_0(((x*34.0)+1.0)*x);\\n}\\n\\nfloat snoise_1_2(vec2 v) {\\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\\n                      0.024390243902439); // 1.0 / 41.0\\n\\t// First corner\\n  vec2 i  = floor(v + dot(v, C.yy) );\\n  vec2 x0 = v -   i + dot(i, C.xx);\\n\\n\\t// Other corners\\n  vec2 i1;\\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\\n  //i1.y = 1.0 - i1.x;\\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\\n  // x1 = x0 - i1 + 1.0 * C.xx ;\\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\\n  vec4 x12 = x0.xyxy + C.xxzz;\\n  x12.xy -= i1;\\n\\n\\t// Permutations\\n  i = mod289_1_0(i); // Avoid truncation effects in permutation\\n  vec3 p = permute_1_1( permute_1_1( i.y + vec3(0.0, i1.y, 1.0 ))\\n    + i.x + vec3(0.0, i1.x, 1.0 ));\\n\\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\\n  m = m*m ;\\n  m = m*m ;\\n\\n\\t// Gradients: 41 points uniformly over a line, mapped onto a diamond.\\n\\t// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\\n\\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\\n  vec3 h = abs(x) - 0.5;\\n  vec3 ox = floor(x + 0.5);\\n  vec3 a0 = x - ox;\\n\\n\\t// Normalise gradients implicitly by scaling m\\n\\t// Approximation of: m *= inversesqrt( a0*a0 + h*h );\\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\\n\\n\\t// Compute final noise value at P\\n  vec3 g;\\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\\n  return 130.0 * dot(m, g);\\n}\\n\\nvoid main() {\\n\\tvUv = uv;\\n\\n\\t// particle uv\\n\\tvec2 puv = offset.xy / uTextureSize;\\n\\tvPUv = puv;\\n\\n\\t// pixel color\\n\\tvec4 colA = texture2D(uTexture, puv);\\n\\tfloat grey = colA.r * 0.21 + colA.g * 0.71 + colA.b * 0.07;\\n\\n\\t// displacement\\n\\tvec3 displaced = offset;\\n\\t// randomise\\n\\tdisplaced.xy += vec2(random(pindex) - 0.5, random(offset.x + pindex) - 0.5) * uRandom;\\n\\tfloat rndz = (random(pindex) + snoise_1_2(vec2(pindex * 0.1, uTime * 0.1)));\\n\\tdisplaced.z += rndz * (random(pindex) * 2.0 * uDepth);\\n\\t// center\\n\\tdisplaced.xy -= uTextureSize * 0.5;\\n\\n\\t// touch\\n\\tfloat t = texture2D(uTouch, puv).r;\\n\\tdisplaced.z += t * 20.0 * rndz;\\n\\tdisplaced.x += cos(angle) * t * 20.0 * rndz;\\n\\tdisplaced.y += sin(angle) * t * 20.0 * rndz;\\n\\n\\t// particle size\\n\\tfloat psize = (snoise_1_2(vec2(uTime, pindex) * 0.5) + 2.0);\\n\\tpsize *= max(grey, 0.2);\\n\\tpsize *= uSize;\\n\\n\\t// final position\\n\\tvec4 mvPosition = modelViewMatrix * vec4(displaced, 1.0);\\n\\tmvPosition.xyz += position * psize;\\n\\tvec4 finalPosition = projectionMatrix * mvPosition;\\n\\n\\tgl_Position = finalPosition;\\n}\\n\"","module.exports = \"// @author brunoimbrizi / http://brunoimbrizi.com\\n\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D uTexture;\\n\\nvarying vec2 vPUv;\\nvarying vec2 vUv;\\n\\nvoid main() {\\n\\tvec4 color = vec4(0.0);\\n\\tvec2 uv = vUv;\\n\\tvec2 puv = vPUv;\\n\\n\\t// pixel color\\n\\tvec4 colA = texture2D(uTexture, puv);\\n\\n\\t// greyscale\\n\\tfloat grey = colA.r * 0.21 + colA.g * 0.71 + colA.b * 0.07;\\n\\tvec4 colB = vec4(grey, grey, grey, 1.0);\\n\\n\\t// circle\\n\\tfloat border = 0.3;\\n\\tfloat radius = 0.5;\\n\\tfloat dist = radius - distance(uv, vec2(0.5));\\n\\tfloat t = smoothstep(0.0, border, dist);\\n\\n\\t// final color\\n\\tcolor = colB;\\n\\tcolor.a = t;\\n\\n\\tgl_FragColor = color;\\n}\""],"sourceRoot":""}