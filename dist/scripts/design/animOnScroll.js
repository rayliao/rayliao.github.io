!function(i){"use strict";function t(){return i.pageYOffset||r.scrollTop}function n(){var t=r.clientHeight,n=i.innerHeight;return t<n?n:t}function e(i){var t=0,n=0;do isNaN(i.offsetTop)||(t+=i.offsetTop),isNaN(i.offsetLeft)||(n+=i.offsetLeft);while(i=i.offsetParent);return{top:t,left:n}}function o(i,o){var s=i.offsetHeight,a=t(),r=a+n(),c=e(i).top,o=o||0;return c+s*o<=r}function s(i,t){for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}function a(i,t){this.el=i,this.options=s(this.defaults,t),this._init()}var r=i.document.documentElement,c={animations:Modernizr.cssanimations},l={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},u=l[Modernizr.prefixed("animation")],m=function(i,t){var n=function(i){if(c.animations){if(i.target!=this)return;this.removeEventListener(u,n)}t&&"function"==typeof t&&t.call()};c.animations?i.addEventListener(u,n):n()};a.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:.2},_init:function(){var t=this;this.items=[].slice.call(this.el.children),this.itemsCount=this.items.length,this.itemsRenderedCount=0,this.didScroll=!1,this.items.forEach(function(i,n){o(i)&&(t._checkTotalRendered(),classie.add(i,"shown"))}),i.addEventListener("scroll",function(){t._onScrollFn()},!1),i.addEventListener("resize",function(){t._resizeHandler()},!1)},_onScrollFn:function(){var i=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){i._scrollPage()},60))},_scrollPage:function(){var i=this;this.items.forEach(function(t,n){classie.has(t,"shown")||classie.has(t,"animate")||!o(t,i.options.viewportFactor)||setTimeout(function(){if(i._checkTotalRendered(),i.options.minDuration&&i.options.maxDuration){var n=Math.random()*(i.options.maxDuration-i.options.minDuration)+i.options.minDuration+"s";t.style.WebkitAnimationDuration=n,t.style.MozAnimationDuration=n,t.style.animationDuration=n}classie.add(t,"animate"),m(t,function(){classie.add(t,"shown"),classie.remove(t,"animate")})},25)}),this.didScroll=!1},_resizeHandler:function(){function i(){t._scrollPage(),t.resizeTimeout=null}var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(i,100)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&i.removeEventListener("scroll",this._onScrollFn)}},i.AnimOnScroll=a}(window);